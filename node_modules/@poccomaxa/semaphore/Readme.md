# semaphore

Limit simultaneous access to a resource.

## Install
    npm install @poccomaxa/semaphore
## Using

###Interface

```javascript
/**
 * @param n {number=1}
 * @constructor
 */
var Semaphore = require('@poccomaxa/semaphore');

/** @param callback {Function} */
Semaphore.enter(callback);

Semaphore.leave();
```

###example
```javascript
var Semaphore = require('./index');
var semaphore = new Semaphore(2);

function expensive_operation(callback) {
    setTimeout(callback, 1000);
}

function fn() {
    semaphore.enter(function () {
        expensive_operation(function () {
            console.log(Date.now());
            semaphore.leave();
        });
    });
}

fn();
fn();
fn();
fn();

/* Output:
 * 1483205883425
 * 1483205883434
 * 1483205884437
 * 1483205884437
 */
```

###Caution
Don't forget to call <i>leave</i> method after <i>enter</i> to avoid semaphore leaking.